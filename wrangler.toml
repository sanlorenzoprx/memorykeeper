name = "memorykeeper-backend"
compatibility_date = "2025-06-17"
main = "backend/src/index.ts"

# Bindings for D1, R2, and AI
[[d1_databases]]
binding = "DB"
database_name = "memorykeeper-db"
database_id = "your-production-d1-id"

[[r2_buckets]]
binding = "PHOTOS_BUCKET"
bucket_name = "memorykeeper-photos"

[ai]
binding = "AI"

# Cron trigger for processing background jobs
[triggers]
crons = ["* * * * *"] # Runs every minute to process jobs quickly in dev. Change for prod.

[vars]
# Environment variables are configured via:
# - `wrangler secret put` for sensitive values in production
# - `.dev.vars` for local development (see README)
#
# The backend expects these variables:
# - CLERK_JWKS_URI: Clerk JWKS URL for JWT verification
# - CLERK_ISSUER: Clerk token issuer URL
# - AI_MODEL_WHISPER (optional): override transcription model (defaults to "@cf/openai/whisper")
#
# Examples (use secrets in prod, not plain [vars]):
# CLERK_JWKS_URI = "https://YOUR-CLERK-DOMAIN/.well-known/jwks.json"
# CLERK_ISSUER = "https://YOUR-CLERK-DOMAIN"
# AI_MODEL_WHISPER = "@cf/openai/whisper"